import Page from '../components/Page.jsx'
import { useEffect, useState } from 'react'
import { getReading, makeAdvice } from '../mock.js'
export default function Alerts(){ const [items,setItems]=useState([]); useEffect(()=>{const id=setInterval(()=>{const hum=getReading('hum'),ph=getReading('ph'),pulso=getReading('pulso'); const batch=[]; if(hum<45) batch.push({tipo:'Humedad baja',detalle:`Terrario: ${hum.toFixed(0)}%`,sugerencia:makeAdvice('hum',hum,'Reptil')}); if(ph<6.6||ph>7.8) batch.push({tipo:'pH fuera de rango',detalle:`Acuario: pH ${ph.toFixed(2)}`,sugerencia:makeAdvice('ph',ph,'Pez')}); if(pulso>140) batch.push({tipo:'Pulso elevado',detalle:`Rocco: ${pulso.toFixed(0)} bpm`,sugerencia:makeAdvice('pulso',pulso,'Perro')}); if(batch.length) setItems(prev=>[...batch,...prev].slice(0,20))},2000); return()=>clearInterval(id)},[]); return(<Page title='Alertas en tiempo real'><div className='space-y-3'>{items.length===0&&<p className='text-sm text-gray-500'>Sin alertas por ahora. Â¡Todo estable! ðŸŒ¿</p>}{items.map((a,i)=>(<div key={i} className='p-4 bg-white border border-emerald-100 rounded-2xl shadow-soft'><p className='font-semibold text-emerald-800'>{a.tipo}</p><p className='text-sm text-gray-600 mt-1'>{a.detalle}</p><p className='text-sm text-emerald-700 mt-1'>{a.sugerencia}</p></div>))}</div></Page>)}
