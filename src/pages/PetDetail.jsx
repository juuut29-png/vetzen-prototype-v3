import Page from '../components/Page.jsx'
import { useParams } from 'react-router-dom'
import { loadPets, getReading, makeAdvice } from '../mock.js'
import { useEffect, useState } from 'react'
export default function PetDetail(){ const { id } = useParams(); const list=loadPets(); const pet=list.find(p=>p.id===id); const [data,setData]=useState({}); useEffect(()=>{const id=setInterval(()=>{setData({temp:getReading('temp'),hum:getReading('hum'),ph:getReading('ph'),actividad:getReading('actividad'),pulso:getReading('pulso')})},1500); return()=>clearInterval(id)},[]); if(!pet) return <Page title='Mascota no encontrada'>No existe.</Page>; return(<Page title={`Perfil: ${pet.nombre}`}><div className='grid md:grid-cols-3 gap-4'><div className='bg-white rounded-2xl shadow-soft p-4 border border-emerald-100 md:col-span-2'><p className='font-semibold text-emerald-800'>Datos</p><p className='text-sm text-gray-700 mt-1'>{pet.especie}{pet.raza?` â€¢ ${pet.raza}`:''} â€¢ {pet.edad?.toFixed?.(1)} aÃ±os â€¢ {pet.fase} {pet.peso?`â€¢ ${pet.peso} kg`:''}</p><p className='text-sm text-emerald-700 mt-1'>{pet.consejoIA}</p>{pet.pesoConsejo&&<p className='text-sm text-emerald-700'>{pet.pesoConsejo}</p>}<p className='font-semibold text-emerald-800 mt-4'>Lecturas en tiempo real (demo)</p><div className='grid sm:grid-cols-2 gap-3 mt-3 text-sm'><div className='p-3 border rounded-xl'>ğŸŒ¡ï¸ Temp: {data.temp?.toFixed(1)} Â°C</div><div className='p-3 border rounded-xl'>ğŸ’§ Humedad: {data.hum?.toFixed(0)}%</div><div className='p-3 border rounded-xl'>ğŸ’§ pH: {data.ph?.toFixed(2)}</div><div className='p-3 border rounded-xl'>ğŸƒ Actividad: {data.actividad?.toFixed(0)}%</div><div className='p-3 border rounded-xl'>â¤ï¸ Pulso: {data.pulso?.toFixed(0)} bpm</div></div></div><div className='bg-white rounded-2xl shadow-soft p-4 border border-emerald-100'><p className='font-semibold text-emerald-800'>Consejo IA</p><p className='text-sm text-gray-700 mt-2'>{makeAdvice('hum', data.hum ?? 52, pet.especie)}</p><p className='text-sm text-gray-700 mt-1'>{makeAdvice('ph', data.ph ?? 7.2, pet.especie)}</p></div></div></Page>) }
